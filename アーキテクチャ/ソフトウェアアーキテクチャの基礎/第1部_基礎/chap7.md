## アーキテクチャ特性のスコープ

### 統合とコナーセンス

##### コナーセンス

> システムの全体的な正しさを維持するため、あるコンポーネントの変更が別のコンポーネントの変更を必要とする場合、2つのコンポーネントはコナーセント(接続)されている。

### アーキテクチャ量子と粒度

##### アーキテクチャ量子

> **高度な機能的凝集性**と**同期的なコナーセンス**を持つ、**独立してデプロイ可能**なアーティファクトであり、<font color=red>アーキテクチャ量子はアーキテクチャ特性のスコープを定義する</font>。

##### 高度な機能的凝集性

> コンポーネント設計における**凝集**とは、コードが目的に沿ってどれだけ統一されているかを表す。
> 例えば、Customerコンポーネント内のプロパティとメソッドが全てCustomerエンティティに関連する場合、高い凝集性を示す。一方で、多くの雑多なメソッドをランダムに集めたUtilityコンポーネントは凝集性が低い。
> 高い機能的凝集性はアーキテクチャ量子が何らかの目的を遂行することを意味している。この区別は単一のDBを持つ従来のものリシックアプリでは重要ではない。しかし、マイクロサービスアーキテクチャでは、開発者は通常、各サービスを単一のワークフロー(境界づけられたコンテキスト)に合わせて設計するのが一般的であり、高い機能的凝集性を示す。

##### 同期的なコナーセンス

> **同期的なコナーセンス**とはあるアプリケーションコンテキスト、もしくはアーキテクチャ量子を形成する分散サービス間における同期的な呼び出しを意味する。
> 例えば、マイクロサービスアーキテクチャ内のあるサービスが別のサービスを同期的に呼び出す場合には、それぞれのサービスにおける運用特性に大きな違いはない。呼び出し元が呼び出し先よりはるかに高いスケーラビリティを持っている場合には、タイムアウトなどの信頼性の問題が発生する。
> このように同期呼び出しは、呼び出しの間、動的なコナーセンスを生み出す。一方がもう一方を持っている場合、それらの運用特性は同じでなければならない。

##### 独立してデプロイ可能

> アーキテクチャ量子には、アーキテクチャの他の部分から独立して機能するために必要な全てのコンポーネントが含まれる。
> 例えば、アプリケーションがDBを使用する場合、「DBは量子の一部」になる。この要件は単一のDBを使用してデプロイされたレガシーシステムは全て定義上、1つの量子となることを意味する。
> 逆にマイクロサービスアーキテクチャのスタイルでは、各サービスには独自のDBが含まれている。